# Label3D
这是一个windows平台的三维数据集标注工具，该工具用于标注出一个三维模型中的实例以及该实例的类别，标注的数据可用于全景分割任务或者实例分割任务。

## 一、标注工具介绍
### 1.1 界面

![UI1-label](.\images\UI1-label.png)

![UI2-label](.\images\UI2-label.png)
### 1.2 功能
#### 1.2.1 模型渲染控制模块
1. 选择启用的光源
2. 选择是否绘制线框（线框就是组成模型的mesh的边框）
3. 选择实例渲染、纹理渲染或是纹理融合模式
    * 实例渲染：不显示模型原本的纹理，凸出显示被标注的实例
    * 纹理渲染：显示模型原本的纹理，不显示被标注的实例的特殊颜色
    * 纹理融合：既显示模型原本的纹理，又凸出显示被标注的实例
4. 通过调节环境光强度、散射光强度和镜面光强度控制光照
5. 通过调节环境光反射、散射光反射和镜面光反射控制模型的材质
#### 1.2.2 模型视图控制模块
1. 相机控制模块中可以选择模型中心点、实例中心点和当前屏幕中心点作为相机控制的参照点
2. 鼠标右键平移模型
3. 鼠标左键旋转视角
4. 鼠标滚轮拉近拉远相机与模型的距离
5. 鼠标中键按下之后移动鼠标可以快速拉远拉近相机与模型的距离
#### 1.2.3 数据标注模块
##### 普通的功能
1. 右键右侧标注模块中某个特定的类别（building，vehicle等）创建实例或者点击创建新实例按钮创建实例，右键实例号可以删除实例
2. 选中实例后可对该实例编辑，点击类别和实例列表右侧“操作”区域“编辑”单选框，之后可以开始标注，标注方式有两种
    * 按住Ctrl + 鼠标左键在左侧View区域点击面片增加实例面片，Ctrl + 鼠标右键删除实例面片
    * 或者按住Ctrl + 鼠标左键/右键 + 滑动鼠标来增加/删除实例面片
3. 若在标注过程中需要切换实例，需点击将列表右侧“操作”区域选中为“选择”状态
4. 标注过程中，可点击列表右侧“视角”区域中的单选框，从不同方向观察实例
5. 点击“保存标注文件”保存为.json文件
##### 特殊的功能
在右侧实例列表中右键实例号除了”删除“外还有三个选项，分别是”提取背景“、“去除噪声”和“图割”
###### “提取背景”选项
所谓的提取背景就是如果你标注过程中标注的面片是封闭的，那么它会自动标注该封闭形状包围的所有面片，如下图所示。

![提取背景](.\images\提取背景.png)

###### “去除噪声”选项

所谓的去除噪声就是去除标注过程中不小心标注的孤立的面片，如下图所示。
![提取背景](.\images\去除噪声.png)

###### “图割”选项
所谓图割功能不是严格上算法意义上的图割，它是指标注一个实例的一部分面片，然后通过算法自动提取出并标注该实例的所有面片，目前分别实现了针对building和plant的自动化提取功能。
* building类
    标注建筑的房顶和一部分墙面就可以自动提取并标注出该建筑实例。
    ![提取背景](.\images\图割-building.png)
* plant类
    对于树形的植物，标注出它的树冠就可以自动提取并标注出该植物的实例；对于非树形的植物，随机标注出它的一部分面片，大部分情况下也能成功自动提取并标注出该植物的实例。
    ![提取背景](.\images\图割-plant.png)
## 二、实现
### 2.1 依赖包
* Easy3d
* eigen3
* glm
* jpeg
* json
* opencv3.4.0
* OpenGL_x64（glew，glut）
### 2.2 软件架构
未完待续
### 2.3 实现细节
未完待续
